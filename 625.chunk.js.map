{"version":3,"file":"625.chunk.js","mappings":"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","sources":["webpack://template/./src/pages/timeline/works/graph/data.tsx","webpack://template/./src/pages/timeline/works/graph/TimelineWorksGraph.tsx","webpack://template/./src/pages/timeline/works/TimelineWorks.tsx","webpack://template/./src/pages/timeline/TimelinePage.tsx","webpack://template/./node_modules/internmap/src/index.js"],"sourcesContent":["export const data: {\r\n  name: string;\r\n  row: number;\r\n  start: number;\r\n  end: number;\r\n}[] = [\r\n  {\r\n    name: \"work1\",\r\n    row: 1,\r\n    start: 0,\r\n    end: 200,\r\n  },\r\n  {\r\n    name: \"work2\",\r\n    row: 2,\r\n    start: 50,\r\n    end: 420,\r\n  },\r\n  {\r\n    name: \"work3\",\r\n    row: 3,\r\n    start: 200,\r\n    end: 300,\r\n  },\r\n  {\r\n    name: \"work4\",\r\n    row: 4,\r\n    start: 400,\r\n    end: 650,\r\n  },\r\n  {\r\n    name: \"work5\",\r\n    row: 5,\r\n    start: 600,\r\n    end: 750,\r\n  },\r\n  {\r\n    name: \"work6\",\r\n    row: 1,\r\n    start: 500,\r\n    end: 650,\r\n  },\r\n  {\r\n    name: \"work7\",\r\n    row: 1,\r\n    start: 750,\r\n    end: 820,\r\n  },\r\n  {\r\n    name: \"work8\",\r\n    row: 3,\r\n    start: 520,\r\n    end: 780,\r\n  },\r\n];\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { data } from \"./data\";\r\n\r\nconst BLOCK_HEIGHT = 50;\r\nconst PADDING = 20;\r\nconst ROW_STEP = 50;\r\n\r\nconst DATA_ROWS = Math.max(...data.map((i) => i.row));\r\nconst DATA_HEIGHT =\r\n  (BLOCK_HEIGHT + ROW_STEP) * DATA_ROWS - ROW_STEP + 2 * PADDING;\r\n// const DATA_WIDTH =\r\n//   Math.max(...data.map((i) => i.end)) - Math.min(...data.map((i) => i.start));\r\n\r\nconst colors = d3\r\n  .scaleLinear()\r\n  .domain([0, DATA_ROWS])\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  .range([\"#00DFFF\", \"#07C2D5 \"] as any);\r\n\r\nconst TimelineWorksGraph = () => {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (containerRef.current) {\r\n      const { width, height } = containerRef.current.getBoundingClientRect();\r\n\r\n      const widthScale = d3\r\n        .scaleLinear()\r\n        .domain([0, Math.max(...data.map((i) => i.end))])\r\n        .range([0, width - 2 * PADDING]);\r\n\r\n      const svg = d3\r\n        .select(containerRef.current)\r\n        .append(\"svg\")\r\n        .attr(\"viewBox\", [-PADDING, -PADDING, width, height])\r\n        .call(\r\n          d3.zoom().on(\r\n            \"zoom\",\r\n            (event) => svgGroup.attr(\"transform\", event.transform)\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n          ) as any\r\n        );\r\n\r\n      const svgGroup = svg.append(\"g\");\r\n\r\n      // svgGroup.selectAll().data(data).enter(w=> console.log(\"w\", w));\r\n\r\n      // const works =\r\n      data.map((work) => {\r\n        const workBox = svgGroup\r\n          .append(\"g\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${work.start}, ${\r\n              (work.row - 1) * (BLOCK_HEIGHT + ROW_STEP)\r\n            })`\r\n          );\r\n\r\n        workBox\r\n          .append(\"rect\")\r\n          .attr(\"width\", work.end - work.start)\r\n          .attr(\"height\", BLOCK_HEIGHT)\r\n          .attr(\"fill\", () => colors(work.row))\r\n          .attr(\"rx\", 5);\r\n\r\n        workBox\r\n          .append(\"g\")\r\n          // TODO: transform label\r\n          // .attr(\"transform-origin\", `center`)\r\n          // .attr(\r\n          //   \"transform\",\r\n          //   `translate(${(work.end - work.start) / 2}, ${BLOCK_HEIGHT / 2})`\r\n          // )\r\n          .attr(\"transform\", `translate(${10}, ${30})`)\r\n          .append(\"text\")\r\n          .text(work.name)\r\n          .attr(\"color\", \"red\");\r\n      });\r\n\r\n      svgGroup\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${0}, ${height - 100})`)\r\n        .call(d3.axisBottom(widthScale));\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      style={{\r\n        height: DATA_HEIGHT + 100,\r\n        maxHeight: 700,\r\n        border: \"1px solid black\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TimelineWorksGraph;\r\n","// import TimelineWorksExample from \"./example/TimelineWorksExample\";\r\nimport TimelineWorksGraph from \"./graph/TimelineWorksGraph\";\r\n\r\nconst TimelineWorks = () => {\r\n  return (\r\n    <section>\r\n      <h2>Works timeline</h2>\r\n      <TimelineWorksGraph />\r\n      {/* <TimelineWorksExample /> */}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default TimelineWorks;\r\n","import TimelineWorks from \"./works/TimelineWorks\";\r\n\r\nconst TimelinePage = () => (\r\n  <main>\r\n    <h1>Timelines</h1>\r\n    <p style={{ color: \"red\" }}>in development...</p>\r\n    {/* <TimelineWorldHistory /> */}\r\n    <TimelineWorks />\r\n  </main>\r\n);\r\n\r\nexport default TimelinePage;\r\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n"],"names":["data","name","row","start","end","DATA_ROWS","Math","max","map","i","DATA_HEIGHT","colors","d3","domain","range","containerRef","useRef","useEffect","current","getBoundingClientRect","width","height","widthScale","svgGroup","append","attr","call","on","event","transform","work","workBox","text","ref","style","maxHeight","border","color","InternMap","Map","constructor","entries","key","keyof","super","Object","defineProperties","this","_intern","value","_key","set","get","intern_get","has","intern_set","delete","intern_delete","Set","valueOf"],"sourceRoot":""}